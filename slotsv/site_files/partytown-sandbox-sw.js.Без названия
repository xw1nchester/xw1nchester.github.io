(()=>{var Rt=Object.defineProperty,At=Object.defineProperties;var kt=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var Tt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable;var dt=(g,f,y)=>f in g?Rt(g,f,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[f]=y,ut=(g,f)=>{for(var y in f||(f={}))Tt.call(f,y)&&dt(g,y,f[y]);if(pt)for(var y of pt(f))_t.call(f,y)&&dt(g,y,f[y]);return g},ft=(g,f)=>At(g,kt(f));var Ft=(g,f)=>()=>(f||g((f={exports:{}}).exports,f),f.exports);var $t=(g,f,y)=>new Promise((E,C)=>{var M=I=>{try{v(y.next(I))}catch(L){C(L)}},k=I=>{try{v(y.throw(I))}catch(L){C(L)}},v=I=>I.done?E(I.value):Promise.resolve(I.value).then(M,k);v((y=y.apply(g,f)).next())});var Pt=Ft(gt=>{(g=>{const f=e=>typeof e=="object"&&e&&e.then,y=()=>{},E=e=>e.length,C=e=>{var t,n,o;try{const s=(t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name;if(s)return s}catch(s){}try{const s=(o=(n=e==null?void 0:e.__zone_symbol__originalInstance)===null||n===void 0?void 0:n.constructor)===null||o===void 0?void 0:o.name;if(s)return s}catch(s){}return""},M=(e,t)=>e.startsWith(t),k=e=>!(M(e,"webkit")||M(e,"toJSON")||M(e,"constructor")||M(e,"toString")||M(e,"_")),v=e=>e.nodeType===11&&e.host?"#s":e.nodeName,I=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER).toString(36),L=(e,t)=>((n,o,s)=>Object.defineProperty(n,o,ft(ut({},s),{configurable:!0})))(e,"name",{value:t}),ht={Anchor:"a",DList:"dl",Image:"img",OList:"ol",Paragraph:"p",Quote:"q",TableCaption:"caption",TableCell:"td",TableCol:"colgroup",TableRow:"tr",TableSection:"tbody",UList:"ul"},yt={Graphics:"g",SVG:"svg"},X=Symbol(),B=Symbol(),T=new Map,Y=new Map,b={},_=new WeakMap,F=(e,t)=>{if(e)return(t=_.get(e))||(t=e[X])||q(e,t=I()),t},Z=(e,t,n,o,s)=>{if((n=b[e])&&n.$window$){if(e===t)return n.$window$;if(o=n.$window$.document,s=t.split(".").pop(),s==="d")return o;if(s==="e")return o.documentElement;if(s==="h")return o.head;if(s==="b")return o.body}return T.get(t)},q=(e,t,n)=>{e&&(T.set(t,e),e[X]=t,e[B]=n=Date.now(),n>G+5e3&&(T.forEach((o,s)=>{o[B]<G&&o.nodeType&&!o.isConnected&&T.delete(s)}),G=n))};let G=0;const h=g.parent,w=document.implementation.createHTMLDocument(),V=h.partytown||{},z=(V.lib||"/~partytown/")+"debug/",j=e=>{},H=[],J=e=>(H.includes(e)||H.push(e),H.indexOf(e)+1),mt=(e,t,n)=>{const o=L(class extends b[e].$window$.HTMLElement{},n[0]);return"connectedCallback,disconnectedCallback,attributeChangedCallback,adoptedCallback".split(",").map(i=>o.prototype[i]=function(...r){t.postMessage([15,e,F(this),i,r])}),o.observedAttributes=n[1],o},W=(e,t,n,o,s,i)=>t!==void 0&&(o=typeof t)?o==="string"||o==="number"||o==="boolean"||t==null?[0,t]:o==="function"?[6]:(n=n||new Set)&&Array.isArray(t)?n.has(t)?[1,[]]:n.add(t)&&[1,t.map(r=>W(e,r,n))]:o==="object"?St(t)?[14,{name:t.name,message:t.message,stack:t.stack}]:(s=C(t))===""?[2,{}]:s==="Window"?[3,[e,e]]:s==="HTMLCollection"||s==="NodeList"?[7,Array.from(t).map(r=>W(e,r,n)[1])]:s.endsWith("Event")?[5,K(e,t,n)]:s==="CSSRuleList"?[12,Array.from(t).map(N)]:M(s,"CSS")&&s.endsWith("Rule")?[11,N(t)]:s==="CSSStyleDeclaration"?[13,K(e,t,n)]:s==="Attr"?[10,[t.name,t.value]]:t.nodeType?[3,[e,F(t),v(t),i]]:[2,K(e,t,n,!0,!0)]:void 0:t,K=(e,t,n,o,s,i,r,c)=>{if(i={},!n.has(t)){n.add(t);for(r in t)k(r)&&(c=r==="path"&&C(t).endsWith("Event")?t.composedPath():t[r],(o||typeof c!="function")&&(s||c!=="")&&(i[r]=W(e,c,n)))}return i},N=e=>{let t={},n;for(n in e)Et.includes(n)&&(t[n]=String(e[n]));return t},tt=e=>{try{setTimeout(()=>{throw new Error(`[critical] ${e}`)})}catch(t){}},St=e=>{try{return e instanceof g.top.Error}catch(t){return tt(t.message),!0}},R=(e,t,n,o)=>{if(t)return n=t[0],o=t[1],n===0?o:n===4?bt(e,o):n===1?o.map(s=>R(e,s)):n===3?Z(o[0],o[1]):n===5?It(et(e,o)):n===2?et(e,o):n===8?o:n===9?new g[t[2]](o):void 0},bt=(e,{$winId$:t,$instanceId$:n,$refId$:o},s)=>(s=Y.get(o),s||(s=function(...i){e.postMessage([9,{$winId$:t,$instanceId$:n,$refId$:o,$thisArg$:W(t,this),$args$:W(t,i)}])},Y.set(o,s)),s),It=e=>new("detail"in e?CustomEvent:Event)(e.type,e),et=(e,t,n,o)=>{n={};for(o in t)n[o]=R(e,t[o]);return n},Et="cssText,selectorText,href,media,namespaceURI,prefix,name,conditionText".split(","),nt=(e,t)=>$t(gt,null,function*(){let n={$msgId$:t.$msgId$},o=E(t.$tasks$),s=0,i,r,c,p,l,d;for(;s<o;s++)try{d=s===o-1,i=t.$tasks$[s],r=i.$winId$,c=i.$applyPath$,!b[r]&&r.startsWith("f_")&&(yield new Promise($=>{let m=0,a=()=>{b[r]||m++>1e3?$():requestAnimationFrame(a)};a()})),c[0]===1&&c[1]in b[r].$window$?q(new b[r].$window$[c[1]](...R(e,c[2])),i.$instanceId$):(p=Z(r,i.$instanceId$),p?(l=Ct(e,r,p,c,d,i.$groupedGetters$),i.$assignInstanceId$&&(typeof i.$assignInstanceId$=="string"?q(l,i.$assignInstanceId$):b[i.$assignInstanceId$.$winId$]={$winId$:i.$assignInstanceId$.$winId$,$window$:{document:l}}),f(l)&&(l=yield l,d&&(n.$isPromise$=!0)),d&&(n.$rtnValue$=W(r,l,void 0,void 0,void 0,i.$instanceId$))):(n.$error$=`Error finding instance "${i.$instanceId$}" on window ${J(r)}`,tt(n.$error$)))}catch($){d&&(n.$error$=String($.stack||$))}return n}),Ct=(e,t,n,o,s,i)=>{let r=0,c=E(o),p,l,d,$,m;for(;r<c;r++){l=o[r],p=o[r+1],d=o[r-1];try{if(!Array.isArray(p))if(typeof l=="string"||typeof l=="number"){if(r+1===c&&i)return m={},i.map(a=>m[a]=n[a]),m;n=n[l]}else{if(p===0){n[d]=R(e,l);return}if(typeof n[d]=="function"&&($=R(e,l),d==="define"&&C(n)==="CustomElementRegistry"&&($[1]=mt(t,e,$[1])),d==="insertRule"&&$[1]>E(n.cssRules)&&($[1]=E(n.cssRules)),n=n[d].apply(n,$),d==="play"))return Promise.resolve()}}catch(a){if(s)throw a}}return n},P=(e,t)=>{let n=t.$winId$,o=t.$window$,s=o.document,i='script[type="text/partytown"]:not([data-ptid]):not([data-pterror])',r,c,p;if(s&&s.body)if(r=s.querySelector('script[type="text/partytown"]:not([data-ptid]):not([data-pterror]):not([async]):not([defer])'),r||(r=s.querySelector(i)),r)r.dataset.ptid=c=F(r,n),p={$winId$:n,$instanceId$:c},r.src?(p.$url$=r.src,p.$orgUrl$=r.dataset.ptsrc||r.src):p.$content$=r.innerHTML,e.postMessage([7,p]);else{if(!t.$isInitialized$){t.$isInitialized$=1,((l,d,$)=>{let m=$._ptf,a=($.partytown||{}).forward||[],S,u,x=(D,lt)=>l.postMessage([10,{$winId$:d,$forward$:D,$args$:W(d,Array.from(lt))}]);if($._ptf=void 0,a.map(D=>{u=$,D.split(".").map((lt,U,A)=>{u=u[A[U]]=U+1<E(A)?u[A[U]]||(A[U+1]==="push"?[]:{}):(...Lt)=>x(A,Lt)})}),m)for(S=0;S<E(m);S+=2)x(m[S],m[S+1])})(e,n,o),s.dispatchEvent(new CustomEvent("pt0"));{const l=o===o.top?"top":"iframe";j(`Executed ${l} window ${J(n)} environment scripts in ${(performance.now()-t.$startTime$).toFixed(1)}ms`)}}e.postMessage([8,n])}else requestAnimationFrame(()=>P(e,t))},ot=(e,t,n)=>{if(!_.has(n)){_.set(n,t);const o=n.document,s=n.history,i=_.get(n.parent);let r=!1;const c=[],p=a=>{r?a():c.push(a)},l=()=>{e.postMessage([5,{$winId$:t,$parentWinId$:i,$url$:o.baseURI,$visibilityState$:o.visibilityState}]),setTimeout(()=>{r=!0,c.forEach(a=>{a()})})},d=s.pushState.bind(s),$=s.replaceState.bind(s),m=(a,S,u,x)=>()=>{try{setTimeout(()=>{e.postMessage([13,{$winId$:t,type:a,state:S,url:o.baseURI,newUrl:u,oldUrl:x}])})}catch(D){}};s.pushState=(a,S,u)=>{d(a,S,u),p(m(0,a,u==null?void 0:u.toString()))},s.replaceState=(a,S,u)=>{$(a,S,u),p(m(1,a,u==null?void 0:u.toString()))},n.addEventListener("popstate",a=>{p(m(2,a.state))}),n.addEventListener("hashchange",a=>{p(m(3,{},a.newURL,a.oldURL))}),n.addEventListener("ptupdate",()=>{P(e,b[t])}),o.addEventListener("visibilitychange",()=>e.postMessage([14,t,o.visibilityState])),b[t]={$winId$:t,$window$:n},b[t].$startTime$=performance.now(),j(`Registered ${t===i?"top":"iframe"} window ${J(t)}`),o.readyState==="complete"?l():n.addEventListener("load",l)}},Mt=(e,t,n)=>{t[0]===4?ot(e,I(),h):(n=b[t[1]],n&&(t[0]===7?requestAnimationFrame(()=>P(e,n)):t[0]===6&&((o,s,i,r,c)=>{c=s.$window$.document.querySelector(`[data-ptid="${i}"]`),c&&(r?c.dataset.pterror=r:c.type+="-x",delete c.dataset.ptid),P(o,s)})(e,n,t[2],t[3])))},wt=()=>{const e=w.createElement("i"),t=w.createTextNode(""),n=w.createComment(""),o=w.createDocumentFragment(),s=w.createElement("p").attachShadow({mode:"open"}),i=Q(h,"IntersectionObserver"),r=Q(h,"MutationObserver"),c=Q(h,"ResizeObserver"),p=h.performance,l=h.screen,d=[[h.history],[p],[p.navigation],[p.timing],[l],[l.orientation],[h.visualViewport],[i,12],[r,12],[c,12],[t],[n],[o],[s],[e],[e.attributes],[e.classList],[e.dataset],[e.style],[w],[w.doctype]],$=[rt("Window",h),rt("Node",t)],a={$config$:JSON.stringify(V,(S,u)=>(typeof u=="function"&&(u=String(u),u.startsWith(S+"(")&&(u="function "+u)),u)),$interfaces$:st(d,$),$libPath$:new URL(z,h.location)+"",$origin$:origin,$localStorage$:at("localStorage"),$sessionStorage$:at("sessionStorage")};return vt(a.$interfaces$,h,"IntersectionObserverEntry"),a},Wt=()=>{const e=Object.getOwnPropertyNames(h).map(t=>((n,o,s,i)=>{if(s=o.match(/^(HTML|SVG)(.+)Element$/),s)return i=s[2],o[0]=="S"?n.createElementNS("http://www.w3.org/2000/svg",yt[i]||i.slice(0,2).toLowerCase()+i.slice(2)):n.createElement(ht[i]||i)})(w,t)).filter(t=>t).map(t=>[t]);return st(e,[])},Ot=new Set(["Object"]),st=(e,t)=>(e.filter(o=>o[0]).map(o=>{const s=o[0],i=o[1],r=C(s),c=h[r].prototype;return[r,c,s,i]}).map(([o,s,i,r])=>it(Ot,t,o,s,i,r)),t),rt=(e,t,n)=>{let o=[],s=[e,"Object",o];for(n in t)ct(o,t,n);return s},it=(e,t,n,o,s,i)=>{if(!e.has(n)){e.add(n);const r=Object.getPrototypeOf(o),c=C(r),p=[],l=Object.getOwnPropertyDescriptors(o);it(e,t,c,r,s,i);for(const d in l)ct(p,s,d);t.push([n,c,p,i,v(s)])}},ct=(e,t,n,o,s,i)=>{try{k(n)&&isNaN(n[0])&&n!=="all"&&(o=t[n],s=typeof o,s==="function"?(String(o).includes("[native")||Object.getPrototypeOf(t)[n])&&e.push([n,5]):s==="object"&&o!=null?(i=C(o),i!=="Object"&&self[i]&&e.push([n,o.nodeType||i])):s!=="symbol"&&(n.toUpperCase()===n?e.push([n,6,o]):e.push([n,6])))}catch(r){}},at=e=>{let t=[],n=0,o=E(h[e]),s;for(;n<o;n++)s=h[e].key(n),t.push([s,h[e].getItem(s)]);return t},Q=(e,t)=>e[t]!==void 0?new e[t](y):0,vt=(e,t,n)=>{t[n]!==void 0&&e.push([n,"Object",Object.keys(t[n].prototype).map(o=>[o,6]),12])};let O;(e=>{const t=g.navigator.serviceWorker;return t.getRegistration().then(n=>(t.addEventListener("message",o=>e(o.data,s=>n.active&&n.active.postMessage(s))),(o,s)=>{s[0]===0?o.postMessage([1,wt()]):s[0]===2?o.postMessage([3,Wt()]):Mt(o,s)}))})((e,t)=>nt(O,e).then(t)).then(e=>{e&&(O=new Worker(z+"partytown-ww-sw.js?v=0.8.0",{name:"Partytown \u{1F389}"}),O.onmessage=t=>{const n=t.data;n[0]===12?nt(O,n[1]):e(O,n)},j("Created Partytown web worker (0.8.0)"),O.onerror=t=>{},h.addEventListener("pt1",t=>ot(O,F(t.detail.frameElement),t.detail)))})})(window)});Pt();})();

//# sourceMappingURL=partytown-sandbox-sw.js.map