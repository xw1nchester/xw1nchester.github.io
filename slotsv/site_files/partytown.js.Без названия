(()=>{(function(r,a,m,d,b,s,u,S,k,n,c,E){const p=new Map;let w=null,f=null;function y(){E||(E=1,u=(s.lib||"/~partytown/")+(s.debug!==!1?"debug/":""),u[0]=="/"&&(k=a.querySelectorAll('script[type="text/partytown"]'),d!=r?d.dispatchEvent(new CustomEvent("pt1",{detail:r})):(S=setTimeout(v,2e4),a.addEventListener("pt0",L),b?h(1):m.serviceWorker?m.serviceWorker.register(u+(s.swPath||"partytown-sw.js"),{scope:u}).then(function(e){e.active?h():e.installing&&e.installing.addEventListener("statechange",function(t){t.target.state=="activated"&&h()})},console.error):v())))}function h(e){n=a.createElement(e?"script":"iframe"),e||(n.setAttribute("style","display:block;width:0;height:0;border:0;visibility:hidden"),n.setAttribute("aria-hidden",!0)),n.id=r.partytown.frameId,n.src=u+"partytown-"+(e?"atomics.js?v=0.8.0":"sandbox-sw.html?"+Date.now()),w=window.history.pushState,f=window.history.replaceState,a.querySelector(s.sandboxParent||"body").appendChild(n),n.contentWindow&&(n.contentWindow.onerror=t=>(p.get(t)||p.get(t)||(p.set(t,!0),typeof t=="string"&&t.includes("[critical]")?v():typeof t=="string"&&!t.includes("_vwo_code")&&setTimeout(()=>{throw new Error(t)},0)),!0))}function v(e,t){L(),window.partytown&&window.partytown.forward&&Array.isArray(window.partytown.forward)&&window.partytown.forward.forEach(i=>{const[g]=i.split(".");window[g]=void 0});const l=[...a.querySelectorAll('script[type="text/partytown"]'),...a.querySelectorAll('script[type="text/partytown-x"]')].filter(i=>!i.getAttribute("src")),o=l.reduce((i,g)=>i||(i=g.getAttribute("data-nonce"),i),null);for(d==r&&(s.forward||[]).map(function(i){delete r[i.split(".")[0]]}),e=0;e<l.length;e++)t=a.createElement("script"),t.setAttribute("data-nonce",o),t.setAttribute("nonce",o),t.innerHTML=l[e].innerHTML,a.head.appendChild(t);w&&(window.history.pushState=w),f&&(window.history.replaceState=f),n&&n.parentNode.removeChild(n)}function L(){clearTimeout(S)}s=r.partytown||{},d==r&&(s.forward||[]).map(function(e){c=r,e.split(".").map(function(t,l,o){c=c[o[l]]=l+1<o.length?o[l+1]=="push"?[]:c[o[l]]||{}:function(){(r._ptf=r._ptf||[]).push(o,arguments)}})}),a.readyState=="complete"?y():(r.addEventListener("DOMContentLoaded",y),r.addEventListener("load",y))})(window,document,navigator,top,window.crossOriginIsolated);})();

//# sourceMappingURL=partytown.js.map